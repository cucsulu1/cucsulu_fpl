@using HopNguyenModel
@model HopNguyenModel.Content
@{
    ViewBag.Title = "Sửa: " + Model.Name;
    Layout = "~/Views/Shared/_BackendLayout.cshtml";

    List<Content> lstNews = ViewBag.lstNews;
}

<div class="page-header position-relative">
    <h1>Sửa: @Model.Name
    </h1>
</div>
<!--/.page-header-->
<div class="row-fluid">
    <div class="tabbable">
        <ul class="nav nav-tabs" id="myTab">
            <li class="active">
                <a data-toggle="tab" href="#tab1">
                    <i class="green icon-home bigger-110"></i>
                    Thông tin chung
                </a>
            </li>
            <li>
                <a data-toggle="tab" href="#tab2">SEO Option
                </a>
            </li>
        </ul>
        <form id="validate" action="/cpanel/editnews" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="Id" value="@Model.Id"/>
            <div class="tab-content">
                @if (Request["msg"] != null && Request["msg"] == "success")
                {
                    <div class="alert alert-success">
                        <button type="button" class="close" data-dismiss="alert">×</button>
                        <strong>Thành công!</strong> Cập nhật thành công.
                    </div>
                }
                @if (ViewBag.Error != null)
                {
                    <div class="alert alert-error">
                        <button type="button" class="close" data-dismiss="alert">×</button>
                        <strong>Lỗi!</strong> @ViewBag.Error
                    </div>
                }
                <div class="tab-pane active" id="tab1">
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Chuyên mục</span>
                            </div>
                            <div class="span9">
                                <div class="noSearch">
                                    @Html.DropDownList("TypeId", null, new { @class = "chzn-select" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Tiêu đề</span>
                            </div>
                            <div class="span9">
                                <input type="text" name="name" value="@Model.Name">
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Hình ảnh</span>
                            </div>
                            <div class="span3">
                                <input type="file" name="file" id="id-input-file-2">
                                <img src="@Model.Image" width="100px" height="80px"/>
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Trạng thái</span>
                            </div>
                            <div class="span9">
                                <div class="noSearch">
                                    <select class="chosen" name="Status">
                                        <option@(Model.Status == true ? " checked=checked" : "") value="True">Hiện</option>
                                        <option@(Model.Status == false ? " checked=checked" : "") value="False">Ẩn</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Tags</span>
                            </div>
                            <div class="span9">
                                <input type="text" name="tags" class="tags" value="@ViewBag.Tags" id="form-field-tags">
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Mô tả</span>
                            </div>
                            <div class="span9">
                                <textarea name="summary" rows="4">@Model.Summary</textarea>
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span12">
                                <strong>Chi tiết</strong>
                                <textarea name="detail" class="ckeditor" rows="10">@Model.Detail</textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="tab2">
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Meta Title</span>
                            </div>
                            <div class="span9">
                                <input type="text" name="MetaTitle" value="@Model.MetaTitle">
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Meta Keyword</span>
                            </div>
                            <div class="span9">
                                <input type="text" name="MetaKeyword" value="@Model.MetaKeyword">
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="row-fluid">
                            <div class="span2">
                                <span class="fLabel">Meta Description</span>
                            </div>
                            <div class="span9">
                                <textarea name="MetaDescription" rows="4">@Model.MetaDescription</textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="formButtons">
                    <div class="row-fluid">
                        <div class="span2"></div>
                        <div class="span9">
                            <button class="btn btn-info" type="submit">
                                <i class="icon-ok bigger-110"></i>
                                Cập nhật
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="row-fluid">
    <div class="choose-type">
        <div class="span4">
            <strong>Lọc nhóm cha</strong> @Html.DropDownList("TypeId", null, "[No filter]", new { onchange = "typeidchange(this.value)" })
        </div>
    </div>
</div>
<div class="row-fluid">
    <table id="sample-table-2" class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>Mã</th>
                <th class="text-left">Tên</th>
                <th>Trạng thái</th>
                <th>Lượt xem</th>
                <th>Chuyên mục</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in lstNews)
            {
                <tr>
                    <td>@item.Id</td>
                    <td style="text-align: left"><a href="/Cpanel/EditNews/@item.Id">@item.Name</a></td>
                    <td>@(item.Status == true ? Html.Raw("<span class=\"label label-success arrowed\">Hiện</span>") : Html.Raw("<span class=\"badge badge-important\">Ẩn</span>"))</td>
                    <td>@item.Hit</td>
                    <td>@item.TypeContent.Name</td>
                    <td>
                        <a href="/Cpanel/EditNews/@item.Id" title="Sửa">Sửa</a> | 
                            <a href="/Cpanel/DeleteNews/@item.Id" onclick="javascript:return confirm('Are you sure?');" title="Xóa">Xóa</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
